
<!DOCTYPE html>
<html lang="cn"
>
<head>
    <title>JavaScript事件 - Café de Lyon</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property="wb:webmaster" content="3cba1a80be39e3a2" />



<link rel="canonical" href="/javascriptshi-jian.html">

        <meta name="author" content="lyon" />
        <meta name="keywords" content="javascript" />
        <meta name="description" content="事件实现了HTML和JavaScript之间的交互工作; 事件流 当一个事件发生时, 不仅仅发生在某个元素上, 同时也在该元素的容器上发生, 为了描述接收事件的顺序, 引入了事件流的概念, 由于历史原因, IE和Netscape浏览器在事件流的描述上采用完全不同的顺序: 事件冒泡和事件捕获: 事件冒泡: 表示事件开始由具体元素接收, 然后逐级向上传播; 事件捕获: 表示上级元素最先接收到事件, 最具体的元素最后接收; 而DOM事件流则将事件过程描述为三个阶段: 事件捕获阶段: 该阶段发生事件捕获, 从上级元素开始逐级往下传递; 处于目标阶段: 实际目标在该阶段接收到事件; 事件冒泡阶段: 该阶段发生事件响应, 从实际目标开始逐级冒泡; 事件处理 用户或者浏览器执行的某种动作称为事件, 常用的如: click、mouseover、load等; 响应这些事件的函数就成为事件处理函数, 这些函数以on开头, 后面跟着事件名称, 如: onclick就是一个对click事件的事件处理函数; HTML事件处理 在HTML元素中添加事件处理函数特性, 即可完成事件处理, 如: &lt;input type=&#34;button ..." />

        <meta property="og:site_name" content="Café de Lyon" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="JavaScript事件"/>
        <meta property="og:url" content="/javascriptshi-jian.html"/>
        <meta property="og:description" content="事件实现了HTML和JavaScript之间的交互工作; 事件流 当一个事件发生时, 不仅仅发生在某个元素上, 同时也在该元素的容器上发生, 为了描述接收事件的顺序, 引入了事件流的概念, 由于历史原因, IE和Netscape浏览器在事件流的描述上采用完全不同的顺序: 事件冒泡和事件捕获: 事件冒泡: 表示事件开始由具体元素接收, 然后逐级向上传播; 事件捕获: 表示上级元素最先接收到事件, 最具体的元素最后接收; 而DOM事件流则将事件过程描述为三个阶段: 事件捕获阶段: 该阶段发生事件捕获, 从上级元素开始逐级往下传递; 处于目标阶段: 实际目标在该阶段接收到事件; 事件冒泡阶段: 该阶段发生事件响应, 从实际目标开始逐级冒泡; 事件处理 用户或者浏览器执行的某种动作称为事件, 常用的如: click、mouseover、load等; 响应这些事件的函数就成为事件处理函数, 这些函数以on开头, 后面跟着事件名称, 如: onclick就是一个对click事件的事件处理函数; HTML事件处理 在HTML元素中添加事件处理函数特性, 即可完成事件处理, 如: &lt;input type=&#34;button ..."/>
        <meta property="article:published_time" content="2015-12-03" />
            <meta property="article:section" content="Learning" />
            <meta property="article:tag" content="javascript" />
            <meta property="article:author" content="lyon" />


    <!-- Bootstrap -->
        <link rel="stylesheet" href="/theme/css/bootstrap.min.css" type="text/css"/>
    <link href="/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="/theme/css/pygments/native.css" rel="stylesheet">
    <link rel="stylesheet" href="/theme/css/style.css" type="text/css"/>

        <link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="Café de Lyon ATOM Feed"/>

</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
	<div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="/" class="navbar-brand">
<img src="/static/img/logo.png" width="30px"/> Café de Lyon            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                        <li >
                            <a href="/category/bioimformatics.html">Bioimformatics</a>
                        </li>
                        <li class="active">
                            <a href="/category/learning.html">Learning</a>
                        </li>
                        <li >
                            <a href="/category/pages.html">Pages</a>
                        </li>
                        <li >
                            <a href="/category/photo.html">Photo</a>
                        </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <li><a href="/archives.html"><i class="fa fa-th-list"></i><span class="icon-label">Archives</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->
<!-- Banner -->
<!-- End Banner -->
<div class="container">
    <div class="row">
        <div class="col-lg-12">

    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="/javascriptshi-jian.html"
                       rel="bookmark"
                       title="Permalink to JavaScript事件">
                        JavaScript事件
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2015-12-03T00:00:00+08:00"> Thu 03 December 2015</time>
    </span>



<span class="label label-default">Tags</span>
	<a href="/tag/javascript.html">javascript</a>
    
</footer><!-- /.post-info -->                    </div>
                </div>
                <p>事件实现了HTML和JavaScript之间的交互工作;</p>
<h2>事件流</h2>
<p>当一个事件发生时, 不仅仅发生在某个元素上, 同时也在该元素的容器上发生, 为了描述接收事件的顺序, 引入了<strong>事件流</strong>的概念, 由于历史原因, IE和Netscape浏览器在事件流的描述上采用完全不同的顺序: <strong>事件冒泡</strong>和<strong>事件捕获</strong>:</p>
<ul>
<li>事件冒泡: 表示事件开始由具体元素接收, 然后逐级向上传播;</li>
<li>事件捕获: 表示上级元素最先接收到事件, 最具体的元素最后接收;</li>
</ul>
<p>而DOM事件流则将事件过程描述为三个阶段:</p>
<ol>
<li>事件捕获阶段: 该阶段发生事件捕获, 从上级元素开始逐级往下传递;</li>
<li>处于目标阶段: 实际目标在该阶段接收到事件;</li>
<li>事件冒泡阶段: 该阶段发生事件响应, 从实际目标开始逐级冒泡;</li>
</ol>
<h2>事件处理</h2>
<p>用户或者浏览器执行的某种动作称为事件, 常用的如: click、mouseover、load等; 响应这些事件的函数就成为事件处理函数, 这些函数以<code>on</code>开头, 后面跟着事件名称, 如: <code>onclick</code>就是一个对click事件的事件处理函数;</p>
<h3>HTML事件处理</h3>
<p>在HTML元素中添加事件处理函数特性, 即可完成事件处理, 如:</p>
<div class="highlight"><pre><span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;button&quot;</span> <span class="na">value=</span><span class="s">&quot;Click Me&quot;</span> <span class="na">onclick=</span><span class="s">&quot;alert(&#39;Clicked&#39;)&quot;</span><span class="nt">&gt;</span>
</pre></div>


<p>上述HTML定义一个按钮, 并且具有onclick特性, 该特性即是一个事件处理函数, 该函数可以如上述直接描述函数体, 也可以引用其他页面定义的函数;</p>
<p>当引用其他页面(如js脚本)中的函数时, 如果该页面没有加载完成, 就会引发错误, 为了隐藏错误, 需要对其进行异常处理:</p>
<div class="highlight"><pre><span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;button&quot;</span> <span class="na">value=</span><span class="s">&quot;Click Me&quot;</span> <span class="na">onclick=</span><span class="s">&quot;try{showMessage();}catch(ex){}&quot;</span><span class="nt">&gt;</span>
</pre></div>


<p>HTML事件处理比较直接, 但是缺点非常明显, 除了以上缺点之外, 由于不同js引擎对标识符的处理差异等也会引发一些错误;</p>
<p>更加严重的问题是: 通过HTML做事件处理, 使得HTML和JavaScript形成紧密耦合, 一旦该事件需要跟新, 则同时需要更新HTML和JavaScript两份代码, 不利于维护;</p>
<h3>DOM级处理程序</h3>
<p>为了解决上述不足, 通过JavaScript指定事件处理是比较好的方法;</p>
<p>DOM实现事件处理时, 其实就是操作元素的事件处理程序属性:</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">element_input</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">);</span>
<span class="nx">element_input</span><span class="p">.</span><span class="nx">onclick</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">alert</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span>
<span class="p">};</span>
</pre></div>


<p>如上实例, 通过操作元素的属性来为元素添加事件处理程序, 如果要删除某个事件, 也仅仅需要将事件处理程序设为<code>null</code>即可;</p>
<p>DOM2级事件处理在此基础上为元素定义了两个方法:</p>
<ul>
<li><code>addEventListener(element, function, boolean)</code>: 该方法为指定事件添加指定的处理程序, 第三个参数为<code>true</code>时表示在捕获阶段调用, <code>false</code>时表示在冒泡阶段调用;</li>
<li><code>removeEventListener(element, function, boolean)</code>: 该方法移除指定事件的指定处理程序;</li>
</ul>
<p>通过第一个方法添加的事件处理程序, 只能通过第二个方法删除, 并且需要接收相同的函数对象, 这意味着如果是匿名处理程序, 则会导致事件处理程序无法删除;</p>
<p>一般而言, 在冒泡阶段处理事件能够有更好的兼容性, 除非必须在事件到达目标之前就截获时才使用捕获阶段处理;</p>
<div class="highlight"><pre><span class="kd">function</span> <span class="nx">showMessage</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;I have been clicked&#39;</span><span class="p">)</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nx">element_input</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">);</span>
<span class="nx">element_input</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="nx">showMessage</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="nx">element_input</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="nx">showMessage</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
</pre></div>


<p>而在IE浏览器中, 则实现了类似上述的事件处理程序: <code>attachEvent()</code>和<code>detachEvent()</code>, 由于IE8之前版本只支持事件冒泡, 这两个方法接收两个参数;</p>
<p>为了在不同浏览器中能够兼容使用事件处理, 最好通过以下方法做功能检查:</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">EventUtil</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">addHandler</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">handler</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">element</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">element</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">handler</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">element</span><span class="p">.</span><span class="nx">attachEvent</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">element</span><span class="p">.</span><span class="nx">attachEvent</span><span class="p">(</span><span class="s2">&quot;on&quot;</span> <span class="o">+</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">handler</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">element</span><span class="p">[</span><span class="s2">&quot;on&quot;</span> <span class="o">+</span> <span class="nx">type</span><span class="p">]</span> <span class="o">=</span> <span class="nx">handler</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">removeHandler</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">handler</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">element</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">())</span> <span class="p">{</span>
            <span class="nx">element</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">handler</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">element</span><span class="p">.</span><span class="nx">detachEvent</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">element</span><span class="p">.</span><span class="nx">detachEvent</span><span class="p">(</span><span class="s2">&quot;on&quot;</span> <span class="o">+</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">handler</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">element</span><span class="p">[</span><span class="s2">&quot;on&quot;</span> <span class="o">+</span> <span class="nx">type</span><span class="p">]</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span>
</pre></div>


<p>上述方法将按照: DOM2 -&gt; IE -&gt; DOM 的顺序选择事件处理方法;</p>
<h2>事件对象</h2>
<p>使用DOM处理事件时, 无论使用哪种方法, 都会传入一个event对象:</p>
<div class="highlight"><pre><span class="kd">function</span> <span class="nx">showMessage</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">alert</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nx">element_input</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">);</span>
<span class="nx">EventUtil</span><span class="p">.</span><span class="nx">addHandler</span><span class="p">(</span><span class="nx">element_input</span><span class="p">,</span> <span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="nx">showMessage</span><span class="p">);</span>  <span class="c1">// [object MouseEvent]</span>
</pre></div>


<p>这些event对象根据事件类型不同而具有不同的方法, 但是都会具有以下属性的方法:</p>
<ul>
<li><code>type</code>: 触发事件的类型;</li>
<li><code>bubbles</code>: 表名事件是否冒泡;</li>
<li><code>cancelable</code>: 表名是否可以取消事件的默认行为;</li>
<li><code>currentTarget</code>: 当前正在处理事件的元素;</li>
<li><code>target</code>: 事件的目标元素;</li>
<li><code>defaultPrevented</code>: 表名是否已经调用了preventDefault()方法;</li>
<li><code>detail</code>: 与事件相关的细节信息;</li>
<li><code>eventPhase</code>: 表示事件处理的阶段: 1,捕获阶段; 2,处于阶段; 3,冒泡阶段;</li>
<li><code>trusted</code>: true表示该事件是浏览器生成的, false表示是开发人员通过JavaScript创建的;</li>
<li><code>view</code>: 与事件关联的抽象视图, 相当于发生事件的window对象;</li>
<li><code>preventDefault()</code>: 取消事件的默认行为;</li>
<li><code>stopImmediatePropagation()</code>: 取消事件的进一步获取或者冒泡, 同时阻止任何事件处理程序被调用;</li>
<li><code>stopPropagation()</code>: 取消事件的进一步获取或者冒泡;</li>
</ul>
<p>以上属性方法都是只读的, 通过访问某些属性可以获取到事件的详细信息, 便于做出处理;</p>
<p>如, 当一个元素具有多个事件时, 可以通过<code>type</code>属性判断, 并分别处理:</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">handler</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">switch</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">case</span> <span class="s2">&quot;click&quot;</span><span class="o">:</span>
            <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;Clicked&quot;</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="s2">&quot;mouseover&quot;</span><span class="o">:</span>
            <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">backgroundColor</span> <span class="o">=</span> <span class="s1">&#39;red&#39;</span><span class="p">;</span>
            <span class="k">break</span><span class="p">;</span>
        <span class="k">case</span> <span class="s2">&quot;mouseout&quot;</span><span class="o">:</span>
            <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">backgroundColor</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
            <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">element_input</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">);</span>
<span class="nx">EventUtil</span><span class="p">.</span><span class="nx">addHandler</span><span class="p">(</span><span class="nx">element_input</span><span class="p">,</span> <span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="nx">handler</span><span class="p">);</span>
<span class="nx">EventUtil</span><span class="p">.</span><span class="nx">addHandler</span><span class="p">(</span><span class="nx">element_input</span><span class="p">,</span> <span class="s1">&#39;mouseover&#39;</span><span class="p">,</span> <span class="nx">handler</span><span class="p">);</span>
<span class="nx">EventUtil</span><span class="p">.</span><span class="nx">addHandler</span><span class="p">(</span><span class="nx">element_input</span><span class="p">,</span> <span class="s1">&#39;mouseout&#39;</span><span class="p">,</span> <span class="nx">handler</span><span class="p">);</span>
</pre></div>


<p>由于事件的处理是通过冒泡的方式进行的, 所以事件处理程序可能并不属于元素本身, 而可能是元素的上一级元素;</p>
<div class="highlight"><pre><span class="kd">function</span> <span class="nx">showMessage</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">alert</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">currentTarget</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">)</span>
<span class="p">}</span>
<span class="nx">EventUtil</span><span class="p">.</span><span class="nx">addHandler</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">,</span> <span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="nx">showMessage</span><span class="p">);</span>  <span class="c1">// [object HTMLBodyElement] [object HTMLInputElement]</span>
</pre></div>


<p>在事件处理时, input元素并没有事件处理程序, 于是向上冒泡, 直到在body中找到该事件的处理程序, 此时, this对象为body, 而真实处理的对象target则是input;</p>
<p>当input和body中都存在事件处理程序时, 通过事件冒泡会依次执行, 通过<code>stopPropagation()</code>方法可以停止进一步冒泡;</p>
<p>同样的, IE浏览器在处理事件对象时, 对这些属性方法的使用有所不同, 和前文相同, 需要对不同浏览器进行功能检查并且适配;</p>
<p>更加完整的<code>EventUtil</code>:</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">EventUtil</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">addHandler</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">handler</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">element</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">element</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">handler</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">element</span><span class="p">.</span><span class="nx">attachEvent</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">element</span><span class="p">.</span><span class="nx">attachEvent</span><span class="p">(</span><span class="s2">&quot;on&quot;</span> <span class="o">+</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">handler</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">element</span><span class="p">[</span><span class="s2">&quot;on&quot;</span> <span class="o">+</span> <span class="nx">type</span><span class="p">]</span> <span class="o">=</span> <span class="nx">handler</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">removeHandler</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">handler</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">element</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">())</span> <span class="p">{</span>
            <span class="nx">element</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">handler</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">element</span><span class="p">.</span><span class="nx">detachEvent</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">element</span><span class="p">.</span><span class="nx">detachEvent</span><span class="p">(</span><span class="s2">&quot;on&quot;</span> <span class="o">+</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">handler</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">element</span><span class="p">[</span><span class="s2">&quot;on&quot;</span> <span class="o">+</span> <span class="nx">type</span><span class="p">]</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">getEvent</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">event</span> <span class="o">?</span> <span class="nx">event</span> <span class="o">:</span> <span class="nb">window</span><span class="p">.</span><span class="nx">event</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">getTarget</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span> <span class="o">||</span> <span class="nx">evnet</span><span class="p">.</span><span class="nx">srcElement</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">preventDefault</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">event</span><span class="p">.</span><span class="nx">returnValue</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="nx">stopPropagation</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">event</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">();</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">event</span><span class="p">.</span><span class="nx">cancelBubble</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span>
</pre></div>


<h2>事件类型</h2>
<p>以下讨论具体的各种事件类型, 其具体类型以及触发条件为:</p>
<ul>
<li>UI事件, 当用户与页面的元素交互时触发;</li>
<li>焦点事件, 当元素获得或者失去焦点时触发;</li>
<li>鼠标事件, 当使用鼠标在页面上执行操作时触发;</li>
<li>滚轮事件, 当使用滚轮或者类似设备时触发;</li>
<li>文本事件, 当文档中输入文本时触发;</li>
<li>键盘事件, 当用户通过键盘在页面上执行操作时触发;</li>
<li>合成事件, 当为IME(输入法编辑器)输入字符时触发;</li>
<li>变动事件, 当底层DOM结构发生变化时触发;</li>
</ul>
<p>这些事件在DOM2和DOM3级别可能有所不同, 具体需要结合文档查看最新支持的情况;</p>
<h3>UI事件</h3>
<p>UI事件往往和window对象或者表单控件有关, 包括文档的加载与卸载事件、错误事件、窗口大小改变、窗口滚动带动元素、选择文本框等等;</p>
<h4>1. load</h4>
<p>当页面完成加载后(包括图像、CSS、JS等外部资源), load事件将被触发, 该事件常用来检查页面是否完整加载, 以便脚本操作其中元素, DOM2中规定该事件应该从document上触发, 可是为了兼容性等问题, 往往浏览器都会在window上实现该事件:</p>
<div class="highlight"><pre><span class="nx">EventUtil</span><span class="p">.</span><span class="nx">addHandler</span><span class="p">(</span><span class="nb">window</span><span class="p">,</span> <span class="s2">&quot;load&quot;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">image</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;img&quot;</span><span class="p">);</span>
    <span class="nx">EventUtil</span><span class="p">.</span><span class="nx">addHandler</span><span class="p">(</span><span class="nx">image</span><span class="p">,</span> <span class="s2">&quot;load&quot;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">event</span> <span class="o">=</span> <span class="nx">EventUtil</span><span class="p">.</span><span class="nx">getEvent</span><span class="p">(</span><span class="nx">event</span><span class="p">);</span>
        <span class="nx">alert</span><span class="p">(</span><span class="nx">EventUtil</span><span class="p">.</span><span class="nx">getTarget</span><span class="p">(</span><span class="nx">event</span><span class="p">).</span><span class="nx">src</span><span class="p">);</span>
    <span class="p">});</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">image</span><span class="p">);</span>
    <span class="nx">image</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="s2">&quot;smile.gif&quot;</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>


<p>以上例程中, 首先为window添加load事件, 并当其加载完成后添加image元素到DOM中;</p>
<p>需要注意的是, 图像和其他资源加载的条件并不相同:</p>
<ul>
<li><code>&lt;img&gt;</code>元素在指定src属性之后就会立即开始图像下载, 而不一定需要先添加到文档中, 因此, src属性应该在事件处理程序之后添加;</li>
<li><code>&lt;script&gt;</code>、<code>&lt;link&gt;</code>元素指定外部资源时, 只有当该元素被添加到文档, 并且设置了src属性后才会开始加载, 因此, src属性和事件处理程序的先后顺序没有必要区分;</li>
</ul>
<p>所以上述例程将src属性放到最后指定;</p>
<h4>2. unload</h4>
<p>unload事件当整个文档被卸载后触发(从一个页面切换到另外一个页面), 利用这个事件可以进行引用的清除, 以免内存泄露;</p>
<p>而由于该事件是文档卸载后才触发, 此时页面加载后的对象已经不一定存在, 如果直接操作DOM节点或者样式将会出现错误;</p>
<h4>3. resize</h4>
<p>resize事件当窗口大小被调整到新的宽度和高度时触发, 多数浏览器会在窗口变化1像素时就触发, 由于触发可能非常频繁, 因此不可以在该事件的处理程序中添加计算量较大的代码, 以免浏览器反应变慢;</p>
<h4>4. scroll</h4>
<p>scroll事件当文档被滚动期间触发, 通过监控&lt;body&gt;元素的scrollLeft和scrollTop这两个属性可以监控当前位置; 除了Safari之外的浏览器都将通过&lt;html&gt;元素来描述该变化, 为了浏览器间兼容, 应该做以下判断:</p>
<div class="highlight"><pre><span class="nx">EventUtil</span><span class="p">.</span><span class="nx">addHandler</span><span class="p">(</span><span class="nb">window</span><span class="p">,</span> <span class="s2">&quot;scroll&quot;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">compatMode</span> <span class="o">==</span> <span class="s1">&#39;CSS1Compat&#39;</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">alert</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">alert</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>


<p>和resize事件一样, scroll事件也会被频繁触发, 因此应该尽量保持事件处理程序简单;</p>
<h3>焦点事件</h3>
<p>该事件当元素在页面元素获得或者失去焦点时触发, 和document.hasFocus()方法以及document.activeElement属性配合使用, 可以跟踪用户在页面上的行为; 主要包括以下六个事件:</p>
<ol>
<li><code>focusout</code>: 元素失去焦点时触发, 并向上冒泡;</li>
<li><code>focusin</code>: 元素获得焦点时触发, 并向上冒泡;</li>
<li><code>blur</code>: 元素失去焦点时触发, 不会冒泡;</li>
<li><code>DOMFocusOut</code>: 元素失去焦点时触发, 只有Opera支持, DOM3中废弃;</li>
<li><code>focus</code>: 元素获取焦点时触发, 不会冒泡;</li>
<li><code>DOMFocusIn</code>: 元素获取焦点时触发, 只有Opera支持, DOM3中废弃;</li>
</ol>
<p>当焦点从一个元素转向另外一个元素时, 这六个事件依次触发;</p>
<p>通过以下方法可以检查浏览器是否支持这些事件:</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">isSupported</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">implementation</span><span class="p">.</span><span class="nx">hasFeature</span><span class="p">(</span><span class="s2">&quot;FocusEvent&quot;</span><span class="p">,</span> <span class="s2">&quot;3.0&quot;</span><span class="p">);</span>
</pre></div>


<h3>鼠标和滚轮事件</h3>
<p>鼠标作为最重要的定位设备, 其事件也因此非常重要, 主要有以下事件:</p>
<ul>
<li><code>mousedown</code>: 按下鼠标时触发;</li>
<li><code>mouseup</code>: 松开鼠标时触发;</li>
<li><code>click</code>: 单击主鼠标按钮时触发; 可以通过键盘触发;</li>
<li><code>dblclick</code>: 双击主鼠标按钮时触发; DOM3支持;</li>
<li><code>mouseenter</code>: 鼠标光标从元素外部移动到元素范围内触发; 进入子元素不触发; 该事件不冒泡; DOM3支持;</li>
<li><code>mouseleave</code>: 鼠标光标从元素内部移动到元素范围外触发; 离开子元素不触发; 该事件不冒泡; DOM3支持;</li>
<li><code>mouseover</code>: 鼠标光标从元素外部移动到元素或者其子元素时触发;</li>
<li><code>mouseout</code>: 鼠标光标从元素或者其子元素移动到元素外部时触发;</li>
<li><code>mousemove</code>: 鼠标指针在元素内部移动时, 反复触发;</li>
</ul>
<p>其中, 只有mouseenter和mouseleave不冒泡, 只有click通过键盘可以触发;</p>
<h4>按钮和点击</h4>
<p>由于鼠标上有多个按钮, 为了判断哪个按钮被按下, DOM给<code>mousedown</code>和<code>mouseup</code>事件添加了<code>button</code>属性, 该属性只有三个值: 0:鼠标主按钮, 1:鼠标中间按钮, 2:鼠标副按钮; 而IE浏览器中, 该属性的值就比较复杂:</p>
<ul>
<li>0: 没有按下任何按钮;</li>
<li>1: 按下主按钮;</li>
<li>2: 按下副按钮;</li>
<li>3: 同时按下主、副按钮;</li>
<li>4: 按下中间按钮;</li>
<li>5: 同时按下主按钮和中间按钮;</li>
<li>6: 同时按下副按钮和中间按钮;</li>
<li>7: 同时按下三个按钮;</li>
</ul>
<p>通过检查是否支持DOM2来判断使用那一个模型;</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">isDOM2Supported</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">implementation</span><span class="p">.</span><span class="nx">hasFeatrue</span><span class="p">(</span><span class="s2">&quot;MouseEvents&quot;</span><span class="p">,</span> <span class="s2">&quot;2.0&quot;</span><span class="p">);</span>
</pre></div>


<p>按钮点击的同时, 事件对象具有<strong>修改键</strong>属性:</p>
<ul>
<li><code>shiftKey</code>: 表示鼠标事件发生时shift按键是否被按下;</li>
<li><code>ctrlKey</code>: 表示鼠标事件发生时ctrl按键是否被按下;</li>
<li><code>altKey</code>: 表示鼠标事件发生时alt按键是否被按下;</li>
<li><code>metaKey</code>: 表示鼠标事件发生时, meta按键(windows下为win键, mac下为cmd键)是否被按下;</li>
</ul>
<p>只有在同一个元素上相继触发mousedown和mouseup, click事件才会被触发; 也只有当触发两次click之后, dblclick才会触发; 这四个事件的触发顺序为:</p>
<ol>
<li>mousedown</li>
<li>mouseup</li>
<li>click</li>
<li>mousedown</li>
<li>mouseup</li>
<li>click</li>
<li>dblclick</li>
</ol>
<p>如果中间有中断, 则后续事件将不再触发;</p>
<h4>鼠标移动</h4>
<p>判断鼠标是否移入元素有四个方法, 这四个方法分成两对, 其中mouseenter和mouseleave只在移动到元素中或者移除元素外才触发, 而mouseover和mouseout则当鼠标移动到元素或者子元素时触发;</p>
<p>mouseover和mouseout事件具有额外的相关元素属性: <code>relatedTarget</code>, 当mouseover触发时, 主目标是获得光标的元素, 而相关元素就是失去光标的元素; mouseout反之;该属性在IE8之前不支持, 并使用<code>fromElement</code>和<code>toElement</code>属性保存, 兼容获取该属性的方法为:</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">getRelatedTarget</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">relatedTarget</span><span class="p">){</span>
        <span class="k">return</span> <span class="nx">event</span><span class="p">.</span><span class="nx">relatedTarget</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">toElement</span><span class="p">){</span>
        <span class="k">return</span> <span class="nx">event</span><span class="p">.</span><span class="nx">toElement</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">fromElement</span><span class="p">){</span>
        <span class="k">return</span> <span class="nx">event</span><span class="p">.</span><span class="nx">fromElement</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>通过以下方法检查鼠标事件是否被支持:</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">isDOM2Supported</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">implementation</span><span class="p">.</span><span class="nx">hasFeature</span><span class="p">(</span><span class="s2">&quot;MouseEvents&quot;</span><span class="p">,</span> <span class="s2">&quot;2.0&quot;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">isDOM3Supported</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">implementation</span><span class="p">.</span><span class="nx">hasFeature</span><span class="p">(</span><span class="s2">&quot;MouseEvent&quot;</span><span class="p">,</span> <span class="s2">&quot;3.0&quot;</span><span class="p">);</span>
</pre></div>


<p>注意DOM3中事件名称为MouseEvent;</p>
<p>鼠标事件触发后, 可以通过以下属性获取光标的位置:</p>
<ul>
<li><code>clientX</code>, <code>clientY</code>: 这两个属性表示鼠标光标相对浏览器的水平和垂直坐标;</li>
<li><code>pageX</code>, <code>pageY</code>: 这两个属性表示鼠标光标相对文档的水平和垂直坐标; IE8及更早版本不支持;</li>
<li><code>screenX</code>, <code>screenY</code>: 这两个属性表示鼠标光标相对整个屏幕的水平和垂直坐标;</li>
</ul>
<p>以上属性的水平坐标都是从左边缘计算的位置, 垂直坐标都是从上边缘计算的位置; 和scrollLeft和scrollTop对应;</p>
<p>虽然IE8以及早期版本不支持文档位置属性, 但是可以通过浏览器位置以及滚动的信息计算出来:</p>
<div class="highlight"><pre><span class="nx">EventUtil</span><span class="p">.</span><span class="nx">addHandler</span><span class="p">(</span><span class="nx">element</span><span class="p">,</span> <span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>
    <span class="nx">event</span> <span class="o">=</span> <span class="nx">EventUtil</span><span class="p">.</span><span class="nx">getEvent</span><span class="p">(</span><span class="nx">event</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">pageX</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">pageX</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">pageY</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">pageY</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">pageX</span> <span class="o">==</span> <span class="kc">undefined</span><span class="p">){</span>
        <span class="nx">pageX</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">clientX</span> <span class="o">+</span> <span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">scrollLeft</span> <span class="o">||</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">scrollLeft</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">pageY</span> <span class="o">==</span> <span class="nx">undefiend</span><span class="p">){</span>
        <span class="nx">pageY</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">clientY</span> <span class="o">+</span> <span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">scrollTop</span> <span class="o">||</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">scrollTop</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>


<h4>滚轮</h4>
<p>不同浏览器对鼠标滚轮的方法支持并不相同, 通过以下方法可以做到兼容:</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">getWheelDelta</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">wheelDelta</span><span class="p">){</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">client</span><span class="p">.</span><span class="nx">engine</span><span class="p">.</span><span class="nx">opera</span> <span class="o">&amp;&amp;</span> <span class="nx">client</span><span class="p">.</span><span class="nx">engine</span><span class="p">.</span><span class="nx">opera</span> <span class="o">&lt;</span> <span class="mf">9.5</span><span class="p">){</span>
            <span class="c1">// opera 9.5 之前版本方向和其他浏览器相反</span>
            <span class="k">return</span> <span class="o">-</span><span class="nx">event</span><span class="p">.</span><span class="nx">wheelDelta</span>
        <span class="p">}</span><span class="k">else</span><span class="p">{</span>
            <span class="c1">// IE、Chrome、Safari、opera 9.5之后版本</span>
            <span class="k">return</span> <span class="nx">event</span><span class="p">.</span><span class="nx">wheelDelta</span>
        <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// firefox</span>
        <span class="k">return</span> <span class="o">-</span><span class="nx">event</span><span class="p">.</span><span class="nx">detail</span> <span class="o">*</span> <span class="mi">40</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h4>其他注意点</h4>
<p>由于移动设备的特殊性, 在给iOS的Safari开发时, 应该注意以下几点:</p>
<ul>
<li>不支持dblclick;</li>
<li>轻击可单击的元素可以触发mousemove事件; 如果屏幕因此变化, 则不再有任何事件发生, 否则一次触发mousedown、mouseup、click;</li>
<li>轻击不可单机的元素不会触发任何事件;</li>
<li>mousemove事件也会触发mouseover和mouseout事件;</li>
<li>两个手指滚动页面时, 触发mousewheel和scroll事件;</li>
</ul>
<p>尽量选择使用<code>click</code>事件;</p>
<h3>键盘与文本事件</h3>
<p>当用户使用键盘时会触发该事件, 不同浏览器的表现差异较大;</p>
<p>主要有三个事件:</p>
<ul>
<li><code>keydown</code>: 按下任意键时触发, 如果不松开, 则重复触发;</li>
<li><code>keypress</code>: 按下任意字符按键时触发, 如果不松开, 则重复触发;</li>
<li><code>keyup</code>: 释放键盘上的按键时触发;</li>
</ul>
<p>同时也支持修改键属性(IE不支持metaKey);</p>
<p>当触发keydown和keyup事件时, 事件可以获得一个keyCode属性表示键盘上对应按键的编码;</p>
<p>而当keypress事件触发时, 还会获得charCode编码表示字符对应的ASCII编码, 而IE和opera早期浏览器则仍然在keyCode属性中保存其ASCII编码;</p>
<p>DOM3中新增key和char属性来替换charCode, 但是不同浏览器之间支持的差异较大;</p>
<p>DOM3还新增了<code>textInput</code>事件, 该事件当用户在可输入区域中输入字符时触发; 该事件具有两个属性:</p>
<ul>
<li><code>data</code>: 保存输入字符;</li>
<li><code>inputMethod</code>: 保存输入的来源;</li>
</ul>
<h3>复合事件</h3>
<p>复合事件是DOM3中添加的事件, 主要用于处理IME文本复合系统, 浏览器支持较少, 检查支持方式为:</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">isSupported</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">implementation</span><span class="p">.</span><span class="nx">hasFeature</span><span class="p">(</span><span class="s2">&quot;CompositionEvent&quot;</span><span class="p">,</span> <span class="s2">&quot;3.0&quot;</span><span class="p">);</span>
</pre></div>


<h3>变动事件</h3>
<p>变动事件在DOM的某一部分发生变化时触发, 有很多变动事件已经在DOM3中作废并且不推荐使用, 仍然支持的事件主要有:</p>
<ul>
<li><code>DOMNodeRemoved</code>: 当子节点在父节点中被移除时触发, 事件属性relatedNode为父节点;</li>
<li><code>DOMNodeRemovedFromDocument</code>: 当节点在文档中移除时触发, 该事件不冒泡;</li>
<li><code>DOMNodeInserted</code>: 在一个子节点插入到父节点时触发, 事件属性relatedNode为父节点;</li>
<li><code>DOMInsertedIntoDocument</code>: 当节点被插入到文档中时触发, 该事件不冒泡;</li>
<li><code>DOMSubtreeModified</code>: 在DOM结构中发生任何变化时触发, 任何以上事件触发后都会触发该事件;</li>
</ul>
<h3>HTML5事件</h3>
<p>HTML5给出了很多浏览器应该支持的事件, 有一些已经得到完善支持, 有一些还没有; 使用前应该做好文档查阅和功能检查的工作;</p>
<h4>1. contextmenu</h4>
<p>上下文菜单事件, 该事件当鼠标点击或者修饰键加鼠标点击时触发, 属于鼠标事件, 该事件中包含鼠标事件的属性; 通过设置该事件的处理程序, 可以自定义上下文菜单;</p>
<p>以书上例子为例:</p>
<div class="highlight"><pre><span class="cp">&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01//EN&quot; &quot;http://www.w3.org/TR/html4/strict.dtd&quot;&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">&quot;en&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">&quot;Content-Type&quot;</span> <span class="na">content=</span><span class="s">&quot;text/html;charset=UTF-8&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>ContextMenu Event Example<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;myDiv&quot;</span><span class="nt">&gt;</span>Right click or Ctrl+click me to get a custom context menu.
    Click anywhere else to get the default context menu.
<span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;ul</span> <span class="na">id=</span><span class="s">&quot;myMenu&quot;</span> <span class="na">style=</span><span class="s">&quot;position:absolute; visibility: hidden; background-color: silver&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://www.nczonline.net&quot;</span><span class="nt">&gt;</span>Nicholas&#39; site<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://www.wrox.com&quot;</span><span class="nt">&gt;</span>Wrox site<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://www.yahoo.com&quot;</span><span class="nt">&gt;</span>Yahoo!<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;learn_event.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>


<div class="highlight"><pre><span class="c1">// include EventUtil;</span>
<span class="nx">EventUtil</span><span class="p">.</span><span class="nx">addHandler</span><span class="p">(</span><span class="nb">window</span><span class="p">,</span> <span class="s2">&quot;load&quot;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">div</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;myDiv&quot;</span><span class="p">);</span>
    <span class="nx">EventUtil</span><span class="p">.</span><span class="nx">addHandler</span><span class="p">(</span><span class="nx">div</span><span class="p">,</span> <span class="s2">&quot;contextmenu&quot;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">event</span> <span class="o">=</span> <span class="nx">EventUtil</span><span class="p">.</span><span class="nx">getEvent</span><span class="p">(</span><span class="nx">event</span><span class="p">);</span>
        <span class="nx">EventUtil</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">(</span><span class="nx">event</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">menu</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;myMenu&quot;</span><span class="p">);</span>
        <span class="nx">menu</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">clientX</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span><span class="p">;</span>
        <span class="nx">menu</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">top</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">clientY</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span><span class="p">;</span>
        <span class="nx">menu</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">visibility</span> <span class="o">=</span> <span class="s2">&quot;visible&quot;</span><span class="p">;</span>
    <span class="p">});</span>
    <span class="nx">EventUtil</span><span class="p">.</span><span class="nx">addHandler</span><span class="p">(</span><span class="nb">document</span><span class="p">,</span> <span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;myMenu&quot;</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">visibility</span> <span class="o">=</span> <span class="s2">&quot;hidden&quot;</span><span class="p">;</span>
    <span class="p">});</span>
<span class="p">});</span>
</pre></div>


<h4>2. beforeunload</h4>
<p>beforeunload在页面卸载之前触发, 该事件会弹出一个对话框, 询问是否确定离开, 事件的returnValue属性表示对话框显示的文字内容;</p>
<h4>3. DOMContentLoaded</h4>
<p>DOMContentLoaded事件在形成完整DOM树时即可触发, 而不必要等到所有的外部资源加载完毕, 所以该事件发生在load事件之前;</p>
<h4>4. readystatechange</h4>
<p>readystatechange事件在某个元素或者文档加载状态改变时触发, 支持该事件的元素有一个readyState属性, 用以表示该元素的当前状态, 这些状态包括:</p>
<ol>
<li><code>uninitialized</code>: 未初始化, 表示对象存在当未完成初始化;</li>
<li><code>loading</code>: 正在加载对象数据;</li>
<li><code>loaded</code>: 对象数据加载完毕;</li>
<li><code>interactive</code>: 交互状态, 可以操作对象, 但是没有完全加载;</li>
<li><code>complete</code>: 对象加载完成;</li>
</ol>
<p>这些属性全部属性元素, 而事件本身并没有提供任何信息;</p>
<p>并非所有的对象都会经历所有阶段, 有可能会跳过中间的某个阶段; 如有些元素会一直停留在load状态, 而有些元素则会跳过load直接进入complete, 而这两个状态都表示该元素已经可用;</p>
<p>进行动态脚本或者动态样式加载外部资源时, 可以判断加载的状态, 以便调用;</p>
<div class="highlight"><pre><span class="c1">// 动态脚本</span>
<span class="nx">EventUtil</span><span class="p">.</span><span class="nx">addHandler</span><span class="p">(</span><span class="nb">window</span><span class="p">,</span> <span class="s2">&quot;load&quot;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">script</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;script&quot;</span><span class="p">);</span>

    <span class="nx">EventUtil</span><span class="p">.</span><span class="nx">addHandler</span><span class="p">(</span><span class="nx">script</span><span class="p">,</span> <span class="s2">&quot;readystatechange&quot;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">event</span> <span class="o">=</span> <span class="nx">EventUtil</span><span class="p">.</span><span class="nx">getEvent</span><span class="p">(</span><span class="nx">event</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">target</span> <span class="o">=</span> <span class="nx">EventUtil</span><span class="p">.</span><span class="nx">getTarget</span><span class="p">(</span><span class="nx">event</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">target</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">==</span> <span class="s2">&quot;loaded&quot;</span> <span class="o">||</span> <span class="nx">target</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">==</span> <span class="s2">&quot;complete&quot;</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">EventUtil</span><span class="p">.</span><span class="nx">removeHandler</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="s2">&quot;readystatechange&quot;</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">callee</span><span class="p">);</span>
            <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;script loaded&quot;</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">});</span>
    <span class="nx">script</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="s2">&quot;example.js&quot;</span><span class="p">;</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">script</span><span class="p">);</span>
<span class="p">});</span>

<span class="c1">// 动态样式</span>
<span class="nx">EventUtil</span><span class="p">.</span><span class="nx">addHandler</span><span class="p">(</span><span class="nb">window</span><span class="p">,</span> <span class="s2">&quot;load&quot;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">link</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;link&quot;</span><span class="p">);</span>
    <span class="nx">link</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="s2">&quot;text/css&quot;</span><span class="p">;</span>
    <span class="nx">link</span><span class="p">.</span><span class="nx">rel</span> <span class="o">=</span> <span class="s2">&quot;stylesheet&quot;</span><span class="p">;</span>

    <span class="nx">EventUtil</span><span class="p">.</span><span class="nx">addHandler</span><span class="p">(</span><span class="nx">link</span><span class="p">,</span> <span class="s2">&quot;readystatechange&quot;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">event</span> <span class="o">=</span> <span class="nx">EventUtil</span><span class="p">.</span><span class="nx">getEvent</span><span class="p">(</span><span class="nx">event</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">target</span> <span class="o">=</span> <span class="nx">EventUtil</span><span class="p">.</span><span class="nx">getTarget</span><span class="p">(</span><span class="nx">event</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">target</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">==</span> <span class="s2">&quot;loaded&quot;</span> <span class="o">||</span> <span class="nx">target</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">==</span> <span class="s2">&quot;complete&quot;</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">EventUtil</span><span class="p">.</span><span class="nx">removeHandler</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="s2">&quot;readystatechange&quot;</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">callee</span><span class="p">);</span>
            <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;CSS loaded&quot;</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">});</span>
    <span class="nx">link</span><span class="p">.</span><span class="nx">src</span> <span class="o">=</span> <span class="s2">&quot;example.css&quot;</span><span class="p">;</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">head</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">link</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>


<h4>5. pageshow, pagehide</h4>
<p>浏览器为了加快前进和后退时的速度, 添加了往返缓存的特性, 将页面数据保存在缓存中(back-forward cache, bfcache), 当页面从往返缓存中读取时, 页面的load事件并不会触发, 而pageshow事件则始终会触发; 相反地, 如果一个页面没有显式处理unload事件, 则在其卸载时会保存到缓存中, 从而触发pagehide事件;</p>
<p>pageshow事件包含一个persisted属性, 表示该页面是否保存在bfcache中;</p>
<p>这两个事件目标虽然是document, 但由于浏览器实现时为了兼容性通常会将这两个事件添加到window中;</p>
<div class="highlight"><pre><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">showCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="nx">EventUtil</span><span class="p">.</span><span class="nx">addHandler</span><span class="p">(</span><span class="nb">window</span><span class="p">,</span> <span class="s2">&quot;load&quot;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;Load fired&quot;</span><span class="p">);</span>
    <span class="p">});</span>

    <span class="nx">EventUtil</span><span class="p">.</span><span class="nx">addHandler</span><span class="p">(</span><span class="nb">window</span><span class="p">,</span> <span class="s2">&quot;pageshow&quot;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">showCount</span><span class="o">++</span><span class="p">;</span>
        <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;Show has been fired &quot;</span> <span class="o">+</span> <span class="nx">showCount</span> <span class="o">+</span>
            <span class="s2">&quot; times. Persisted? &quot;</span> <span class="o">+</span> <span class="nx">event</span><span class="p">.</span><span class="nx">persisted</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">})();</span>

<span class="nx">EventUtil</span><span class="p">.</span><span class="nx">addHandler</span><span class="p">(</span><span class="nb">window</span><span class="p">,</span> <span class="s2">&quot;pagehide&quot;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;Hidding. Persisted? &quot;</span> <span class="o">+</span> <span class="nx">event</span><span class="p">.</span><span class="nx">persisted</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>


<h4>6. hashchange</h4>
<p>该事件当URL中的hash值改变时触发, 通常用于Ajax应用中利用URL参数保存导航信息;</p>
<p>该事件包含两个属性: oldURL和newURL, 分别表示改变之前和改变之后的URL, 但是IE和firefox浏览器不支持这两个属性, 这时需要通过location.hash确定当前hash;</p>
<p>以下代码检测浏览器是否支持该事件:</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">isSupported</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;onhashchange&quot;</span> <span class="k">in</span> <span class="nb">window</span><span class="p">)</span> <span class="o">&amp;&amp;</span>
                     <span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">documentMode</span> <span class="o">===</span> <span class="kc">undefined</span> <span class="o">||</span> <span class="nb">document</span><span class="p">.</span><span class="nx">documentMode</span> <span class="o">&gt;</span> <span class="mi">7</span><span class="p">);</span>
</pre></div>


<h3>设备事件以及触摸手势事件</h3>
<p>设备事件应用于智能手机和平板电脑中, 主要当设备横向模式、纵向模式切换时触发, 不同浏览器对该事件的处理不同, 与设备支持也紧密相关;</p>
<p>触摸事件和手势事件在iOS的Safari中应用, 当触摸屏幕或者在屏幕中产生手势时相应触发;</p>
<h2>事件性能</h2>
<p>每个事件处理程序都会占用内存, 内存中事件越多, 性能就会越差, 并且事件程序的处理会增加DOM的访问次数, 从而降低性能;</p>
<p>为了提升事件的性能, 有以下两种方式来优化事件:</p>
<ol>
<li>利用事件冒泡, 将相同类型的事件统一使用同一个事件处理程序, 只在程序内部判断目标元素类型从而做出相应操作;</li>
<li>即使移除内存中过时不用的空事件处理程序, 另外当使用innerHTML元素替换元素时, 应该首先移除事件处理程序, 否则会导致无法正确回收;</li>
</ol>
<p>应该避免一些无意义的事件, 以及避免给会重复触发的事件添加复杂处理, 从而提高浏览器性能;</p>
<h2>事件模拟</h2>
<p>在IE之外的浏览器中, 使用<code>document.createEvent(type)</code>方法, 并且传入相应事件类型, 经过相应的初始化操作之后, 通过<code>dispatchEvent(event)</code>方法模拟事件的触发;</p>
<p>这些事件类型包括:</p>
<ul>
<li>UIEvents, 对应DOM3中为UIEvent;</li>
<li>MouseEvents, 对应DOM3中为MouseEvent;</li>
<li>MutationEvents, 对应DOM3中为MutationEvent;</li>
<li>HTMLEvents, DOM3中将该类型分散到其他事件类型中;</li>
<li>KeyboardEvent, 只在DOM3中存在;</li>
</ul>
<p>当浏览器中不支持某些事件时, 也可以通过<code>document.createEvent("Events")</code>方法创建通用事件对象, 使用<code>initEvent()</code>初始化, 然后给该对象赋予相应的属性, 再通过<code>dispatchEvent()</code>方法触发;</p>
<p>而在IE浏览器中, 则需要调用<code>document.createEventObject()</code>方法创建event对象, 然后直接给该对象赋值相应的属性, 直到在触发事件时, 使用<code>fireEvent(type, event)</code>才指定事件类型;</p>
            </div>
            <!-- /.entry-content -->

    <hr/>
    <section class="comments" id="comments">
        <h2>Comments</h2>
<!--         <div class="ds-thread" data-thread-key="javascriptshi-jian" data-title="JavaScript事件" data-url="/javascriptshi-jian.html"></div> -->
		<script type="text/javascript">
     		var duoshuoQuery = {short_name:"lyon0804"};
    		(function() {
    			var ds = document.createElement('script');
    			ds.type = 'text/javascript';ds.async = true;
    			ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    			ds.charset = 'UTF-8';
    			(document.getElementsByTagName('head')[0]
    			 || document.getElementsByTagName('body')[0]).appendChild(ds);
    		})();
    	</script>
        <script type="text/javascript">
            function toggleDuoshuoComments(container, id, title, url){
                if(jQuery(container).has("div").length>0){
                    jQuery(container).empty();
                    return;
                }
                var el = document.createElement('div');
                el.setAttribute('class','ds-thread');
                el.setAttribute('data-thread-key', id);
                el.setAttribute('data-title',title);
                el.setAttribute('data-url', url);
                DUOSHUO.EmbedThread(el);
                jQuery(container).append(el);
            }
        </script>
        <a href="javascript:void(0);" onclick="toggleDuoshuoComments('#comment-box', 'javascriptshi-jian', 'JavaScript事件' , '/javascriptshi-jian.html');">
        查看评论</a>
        <div id="comment-box" ></div>
        <hr/>
    	<noscript>Please enable JavaScript to view the <a href="http://duoshuo.com/">comments powered by
        Duoshuo.</a></noscript>
    	<a href="http://duoshuo.com" class="dsq-brlink">comments powered by <span>Duoshuo</span></a>

    </section>
        </article>
    </section>

        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
            <!-- <div class="list-group-item"> -->
            <!-- <h4> -->
            <!-- <i class="fa fa-home fa-lg"></i> -->
            <!-- <span class="icon-label">Social</span></h4> -->
              <ul class="list-group" id="social">
                   <!-- <li class="list-group-item"> -->
                   <div class="social-item">
                   <a href="http://github.com/lozybean">
                     <i class="fa fa-github-square fa-lg"></i><!--  github -->
                   </a>
                   </div>
                   <!-- </li> -->
                   <!-- <li class="list-group-item"> -->
                   <div class="social-item">
                   <a href="http://weibo.com/lyon0804">
                     <i class="fa fa-weibo fa-lg"></i><!--  weibo -->
                   </a>
                   </div>
                   <!-- </li> -->
              </ul>
            <!-- </div> -->
         <div class="col-xs-10">&copy; 2016 lyon
            &middot; Powered by <a href="https://github.com/DandyDev/pelican-bootstrap3" target="_blank">pelican-bootstrap3(modified by lyon)</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>         </div>
         <div class="col-xs-2" id="back-top">
            <!-- <p class="pull-right"><i class="fa fa-arrow-up"></i>  -->
            <a href="#top" title="回到顶部"></a>
            </p>
         </div>
      </div>
   </div>
</footer>
<script src="/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="/theme/js/respond.min.js"></script>


</body>
</html>